{
    "$schema": "http://json.schemastore.org/template",
    "author": "Efren Gonzalez",
    "classifications": [
        "OpenFaas Functions",
        "Trigger",
        "HTTP"
    ],
    "name": "OpenFaas C# net 5.0 Function",
    "shortName": "ofaas-function",
    "identity": "Oni.OpenFaas.CSharp.DotNet.5.0",
    "groupIdentity": "Oni.OpenFaas.Functions.HttpTrigger",
    "tags": {
        "language": "C#",
        "type": "project"
    },
    "sourceName": "Oni.Serverless.Function",
    "preferNameDirectory": true,
    "symbols": {
        "image": {
            "type": "parameter",
            "description": "Function's Docker Image Name.",
            "replaces": "function-image",
            "isRequired": true
        },
        "signature": {
            "type": "parameter",
            "datatype": "choice",
            "defaultValue": "none",
            "description": "Validate Request Signature",
            "isRequired": false,
            "choices": [
                {
                    "choice": "none",
                    "description": "do not validate signature."
                },
                {
                    "choice": "hmac-sha1",
                    "description": "Validate signature using hmac-sha1"
                },
                {
                    "choice": "hmac-sha256-v4",
                    "description": "Validate signature using hmac-sha256"
                },
                {
                    "choice": "ed25519",
                    "description": "Validate signature using EdDSA Curve25519"
                }
            ]
        },
        "trigger": {
            "type": "parameter",
            "datatype": "choice",
            "defaultValue": "http",
            "description": "Function Template",
            "isRequired": false,
            "choices": [
                {
                    "choice": "http",
                    "description": "Use HTTP to trigger the function"
                },
                {
                    "choice": "nats",
                    "description": "Use NATS evnet to trigger the function"
                },
                {
                    "choice": "cron",
                    "description": "Use CRON to trigger the function."
                },
                {
                    "choice": "eventSource",
                    "description": "Triggers a function from an Event source like Kafka, MQTTP, etc."
                },
                {
                    "choice": "keda",
                    "description": "Triggers a function from an KEDA Event source."
                }
            ]
        },
        "topic": {
            "type": "parameter",
            "datatype": "string",
            "defaultValue": "sample-topic",
            "replaces": "ofaas-topic"
        },
        "schedule": {
            "type": "parameter",
            "datatype": "string",
            "defaultValue": "*/5 * * * *",
            "replaces": "ofaas-cron"
        },
        
        "validateSignature": {
            "type": "computed",
            "datatype":"bool",
            "value": "signature != \"none\""
        },
        "isHmacSHA1": {
            "type": "computed",
            "datatype":"bool",
            "value": "signature == \"hmac-sha1\""
        },
        "isHmacSHA256v4": {
            "type": "computed",
            "datatype":"bool",
            "value": "signature == \"hmac-sha256-v4\""
        },
        "isED25519": {
            "type": "computed",
            "datatype":"bool",
            "value": "signature == \"ed25519\""
        },

        "isNats": {
            "type": "computed",
            "datatype": "bool",
            "value": "trigger == nats"
        },
        "isCron": {
            "type": "computed",
            "datatype": "bool",
            "value": "trigger == cron"
        },
        "isEvent": {
            "type": "computed",
            "datatype": "bool",
            "value": "trigger == eventSource"
        },
        "isKeda": {
            "type": "computed",
            "datatype": "bool",
            "value": "trigger == keda"
        },

        "funcName": {
            "type": "generated",
            "generator": "casing",
            "parameters": {
                "source": "name",
                "toLower": true
            },
            "replaces": "function-name"
        },
        "assembly": {
            "type": "generated",
            "generator": "casing",
            "parameters": {
                "source": "name",
                "toLower": true
            },
            "replaces": "function-assembly-name"
        }
    },
    "SpecialCustomOperations": {
        "**/*.json": {
            "operations": [
                {
                    "type": "conditional",
                    "configuration": {
                        "if": [
                            "---#if"
                        ],
                        "else": [
                            "---#else"
                        ],
                        "elseif": [
                            "---#elseif",
                            "---#elif"
                        ],
                        "endif": [
                            "---#endif"
                        ],
                        "trim": "true",
                        "wholeLine": "true"
                    }
                }
            ]
        }
    }
}